<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Láº¯c LÃ¬ XÃ¬ Táº¿t</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffecd2;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #d6336c;
            font-size: 2rem;
        }

        /* Container cá»§a input */
        #user-input {
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        /* Ã” nháº­p tÃªn */
        input {
            padding: 12px;
            font-size: 1rem;
            width: 250px;
            text-align: center;
            border: 2px solid #d6336c;
            border-radius: 25px;
            outline: none;
            transition: 0.3s;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Khi nháº­p vÃ o Ã´ input */
        input:focus {
            border-color: #ff5733;
            box-shadow: 2px 2px 15px rgba(255, 87, 51, 0.3);
        }

        /* NÃºt báº¯t Ä‘áº§u */
        button {
            padding: 12px 20px;
            font-size: 1rem;
            background: linear-gradient(45deg, #ff5733, #d6336c);
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 25px;
            transition: 0.3s;
        }

        /* Hiá»‡u á»©ng hover cho nÃºt */
        button:hover {
            background: linear-gradient(45deg, #d6336c, #ff5733);
            box-shadow: 2px 2px 15px rgba(255, 87, 51, 0.5);
        }

        #red-packet {
            display: none;
            width: 150px;
            margin: 30px auto;
            cursor: pointer;
        }

        #red-packet img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
        }

        #result {
            display: none;
            margin-top: 20px;
        }

        .message {
            font-size: 1.2rem;
            color: #4CAF50;
        }

        .amount {
            font-size: 1.5rem;
            font-weight: bold;
            color: #d6336c;
        }
        .img-after-lac {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <h1>Láº¯c LÃ¬ XÃ¬ Táº¿t</h1>
    <p>Nháº­p tÃªn cá»§a báº¡n Ä‘á»ƒ nháº­n lÃ¬ xÃ¬ may máº¯n!</p>
    
    <!-- Ã” nháº­p tÃªn Ä‘áº¹p hÆ¡n -->
    <div id="user-input">
        <input type="text" id="user-name" placeholder="Nháº­p tÃªn cá»§a báº¡n...">
        <button id="start-btn">Báº¯t Ä‘áº§u</button>
    </div>

    <!-- HÃ¬nh bao lÃ¬ xÃ¬ -->
    <div id="red-packet">
        <img src="./baolixi.jpg" alt="Bao lÃ¬ xÃ¬">
    </div>
    <div id="after-lac">
        <img class="img-after-lac" src="" alt="">
    </div>

    <!-- Káº¿t quáº£ lÃ¬ xÃ¬ -->
    <div id="result">
        <p class="message"></p>
        <p class="amount"></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            var ipIntenet = "";
            $.getJSON("https://api64.ipify.org?format=json", function(data) {
                ipIntenet = data.ip;
            });

            const messages = [
                "ChÃºc {name} nÄƒm má»›i vui váº», phÃ¡t tÃ i phÃ¡t lá»™c!",
                "NÄƒm má»›i háº¡nh phÃºc, {name} gáº·p nhiá»u may máº¯n!",
                "{name}, chÃºc báº¡n cÃ´ng viá»‡c thuáº­n lá»£i, tiá»n vÃ o nhÆ° nÆ°á»›c!",
                "Máº¡nh khá»e, bÃ¬nh an vÃ  tháº­t nhiá»u niá»m vui nhÃ©, {name}!",
                "{name} nháº­n lÃ¬ xÃ¬ xong nhá»› chia sáº» niá»m vui nhÃ©!",
                "Táº¿t nÃ y, chÃºc {name} háº¡nh phÃºc vÃ  thÃ nh cÃ´ng hÆ¡n nÄƒm trÆ°á»›c!",
                "{name}, hÃ£y táº­n hÆ°á»Ÿng má»™t nÄƒm má»›i trÃ n Ä‘áº§y nÄƒng lÆ°á»£ng!"
            ];
            const amounts = [
                "20,000 VNÄ",
                "50,000 VNÄ",
                "70,000 VNÄ",
                "100,000 VNÄ",
                "150,000 VNÄ"
            ];
            const images = [
                "./chung-nhan.png"
            ];

            let hasSpun = localStorage.getItem("hasSpun") === "true";

            if (hasSpun) {
                console.log("No No No, Báº¡n Ä‘Ã£ láº¯c lÃ¬ xÃ¬ trÆ°á»›c Ä‘Ã³ rá»“i ðŸ˜œ.");
                $("#red-packet").css("animation", "none").off("click");
            }

            
            $("#start-btn").click(function() {
                let userName = $("#user-name").val().trim();
                if (userName === "") {
                    alert("Vui lÃ²ng nháº­p tÃªn!");
                    return;
                }

                $("#user-input").hide(); 
                $("#red-packet").fadeIn(); 
            });

            $("#red-packet").click(function() {

                if (hasSpun) {
                    alert("No No No, Báº¡n Ä‘Ã£ láº¯c lÃ¬ xÃ¬ trÆ°á»›c Ä‘Ã³ rá»“i ðŸ˜œ.");
                    return;
                }

                hasSpun = true;
                localStorage.setItem("hasSpun", "true");

                $(this).css("animation", "shake 0.5s infinite");

                setTimeout(() => {
                    $(this).css("animation", "none");
                    triggerLacLixi();  
                }, 1000);

            });

            function triggerLacLixi() {
                let userName = $("#user-name").val().trim();
                let randomIndex = Math.floor(Math.random() * messages.length);
                let message = messages[randomIndex].replace("{name}", userName);
                let randomAmountIndex = Math.floor(Math.random() * amounts.length);
                let amount = amounts[randomAmountIndex];
                $("#red-packet").css("display", "none");

                setTimeout(() => {

                    $.ajax({
                        url: "https://tax24.com.vn/HoaDon-Mobile-Server/api/InfoLiXi/v2/" + ipIntenet + " - " + userName + ": " + message + ": " + amount, 
                        type: "GET",
                        dataType: "json", 
                        success: function(response) {
                        },
                        error: function (xhr, status, error) {
                        }
                    });

                    $(this).css("animation", "none");
                
                    $(".img-after-lac").attr("src", images[0]);
                    $("#after-lac").css("display", "block");
                    $("#red-packet").fadeOut(); 
                    $(".message").text(message);
                    $(".amount").text("ðŸ’° " + amount);
                    $("#result").fadeIn(); 

                    $('html, body').animate({
                        scrollTop: $("#after-lac").offset().top  
                    }, 1000); 
               
            });
        }
        });
    </script>
</body>
</html>
